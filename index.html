<h2>Salário por Segmento</h2>
<table>
  <thead>
    <tr>
      <th>Segmento</th>
      <th>Salário</th>
    </tr>
  </thead>
  <tbody id="tabelaSalario"></tbody>
</table>

<script>
let dadosSalario = []; // Array para armazenar os salários

// Carregar dados de salário da API (supondo que o endpoint retorne {segmento, unidade, salario})
async function carregarDadosSalario() {
  try {
    const resposta = await fetch('https://script.google.com/macros/s/AKfycbyKMWfYsfbXfOw0MRS_Wh39jnjmdO7dJuCLPTb7hZT7K_DPoN8oSdDxFEiPGrcBx49yEw/exec?tipo=salario');
    dadosSalario = await resposta.json();
    atualizarTabelaSalario(); // Atualiza a tabela caso já tenha unidade selecionada
  } catch (erro) {
    console.error("Erro ao carregar dados de salário:", erro);
    document.getElementById("tabelaSalario").innerHTML = '<tr><td colspan="2">Erro ao carregar</td></tr>';
  }
}

// Atualizar tabela de salário ao mudar unidade
function atualizarTabelaSalario() {
  const unidadeSelecionada = document.getElementById("unidade").value;
  const tabelaSalario = document.getElementById("tabelaSalario");
  tabelaSalario.innerHTML = "";

  if (!unidadeSelecionada) return;

  const linhas = dadosSalario.filter(d => d.unidade === unidadeSelecionada);
  linhas.forEach(d => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${d.segmento}</td>
      <td>R$ ${parseFloat(d.salario).toFixed(2).replace('.', ',')}</td>
    `;
    tabelaSalario.appendChild(tr);
  });
}

// Atualizar também a tabela de salário quando mudar a unidade
document.getElementById("unidade").addEventListener("change", atualizarTabelaSalario);

// Chamar no início
carregarDadosSalario();
</script>
